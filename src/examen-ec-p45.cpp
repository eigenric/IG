// Nombre: Ricardo, Apellidos: Ruiz Fernández de Alba, Titulación: GIM
// email: ricardoruiz@correo.ugr.es, DNI: 77168601J

#include "examen-ec-p45.h"

MallaP4::MallaP4()
{
    vertices = {  
      { -1.0, -1.0, -1.0 }, // 0
      { -1.0, -1.0, +1.0 }, // 1
      { -1.0, +1.0, -1.0 }, // 2
      { -1.0, +1.0, +1.0 }, // 3
      { +1.0, -1.0, -1.0 }, // 4
      { +1.0, -1.0, +1.0 }, // 5
      { +1.0, +1.0, -1.0 }, // 6
      { +1.0, +1.0, +1.0 }, // 7

      { -1.0, -1.0, -1.0 }, // 0, 8
      { -1.0, -1.0, +1.0 }, // 1, 9
      { -1.0, +1.0, -1.0 }, // 2, 10
      { -1.0, +1.0, +1.0 }, // 3, 11
      { +1.0, -1.0, -1.0 }, // 4, 12
      { +1.0, -1.0, +1.0 }, // 5, 13
      { +1.0, +1.0, -1.0 }, // 6, 14
      { +1.0, +1.0, +1.0 }, // 7, 15

      { -1.0, -1.0, -1.0 }, // 0, 16
      { -1.0, -1.0, +1.0 }, // 1, 17
      { -1.0, +1.0, -1.0 }, // 2, 18
      { -1.0, +1.0, +1.0 }, // 3, 19
      { +1.0, -1.0, -1.0 }, // 4, 20
      { +1.0, -1.0, +1.0 }, // 5, 21
      { +1.0, +1.0, -1.0 }, // 6, 22
      { +1.0, +1.0, +1.0 }, // 7, 23

      // Tejado (Tetraedro)
      { -1.0, +1.0, -1.0 }, // 2, 24
      { -1.0, +1.0, +1.0 }, // 3, 25
      { +1.0, +1.0, -1.0 }, // 6, 26
      { +1.0, +1.0, +1.0 }, // 7, 27

      // Apice replicado 4 veces
      { 0.0, +2.0, 0.0}, //  28
      { 0.0, +2.0, 0.0},  // 29
      { 0.0, +2.0, 0.0},  // 30
      { 0.0, +2.0, 0.0},  // 31
   };

   triangulos = 
   {
      {0,1,3}, {0,3,2}, // X-
      {5,4,7}, {4,6,7}, // X+

      {8,13,9}, {8,12,13}, // Y-
      // Sin cara superior

      {16,22,20},{16,18,22}, // Z-
      {17,21,23},{17,23,19}, // Z+

      // Tejado
      {24,25,28}, {25,27,29},
      {27,26,30}, {26,24,31}
   };

   cc_tt_ver =
   {
      // Caras Izquierda y Derecha
      {0.25, 1.0-0.0},  // 0
      {0.5, 1.0-0.0}, // 1
      {0.25, 1.0-0.5}, // 2
      {0.5, 1.0-0.5}, // 3
      {1.0, 1.0-0.0}, // 4
      {0.75, 1.0-0.0}, // 5
      {1.0, 1.0-0.5}, // 6
      {0.75, 1.0-0.5}, // 7

      // Caras Superior e Inferior
      {0.75, 1.0-1.0}, // 8
      {0.5, 1.0-0.5}, // 9
      {0.0, 1.0-1.0}, // 10
      {0.0, 1.0-0.5}, // 11
      {0.25, 1.0-0.5}, // 12
      {0.5, 1.0-0.5}, // 13
      {1/4, 1.0-0.5}, // 14
      {0.0, 1.0-0.5}, // 15

      // Caras Delantera y Traseras
      {0.25, 1.0-0.0}, // 16
      {0.5, 1.0-0.0}, // 17
      {0.25, 1.0-0.5}, // 18
      {0.5, 1.0-0.5}, // 19
      {0.0, 1.0-0.0}, // 20
      {0.75, 1.0-0.0}, // 21
      {0.0, 1.0-0.5}, // 22
      {0.75, 1.0-0.5}, // 23

      {0.0, 1.0-0.5}, // 24
      {0.25, 1.0-0.5}, // 25
      {0.0, 1.0-1.0}, // 26
      {0.25, 1.0-1.0}, // 27

      {0.125, 1.0-1.0}, // 28
      {0.125, 1.0-1.0}, // 29
      {0.125, 1.0-1.0}, // 30
      {0.125, 1.0-1.0}, // 31
   };

   calcularNormales();

}

NodoP4::NodoP4()
{

    Textura* textura = new Textura("ventanas-tejado-2048x1024.jpg");
    Material* material = new Material(textura, 0.6, 0.8, 0.1, 15.0);
    agregar(material);

    agregar(new MallaP4() );
}